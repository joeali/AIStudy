# GLM API 429 é”™è¯¯è§£å†³æ–¹æ¡ˆ

## ğŸš¨ é—®é¢˜ç—‡çŠ¶

```
429: GLM API å¹¶å‘é™åˆ¶: ä½™é¢ä¸è¶³æˆ–æ— å¯ç”¨èµ„æºåŒ…,è¯·å……å€¼
```

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1: è·å–æ–°çš„ API Key

1. **è®¿é—®æ™ºè°±AIå¼€æ”¾å¹³å°**
   - ç½‘å€: https://open.bigmodel.cn/
   - æ³¨å†Œ/ç™»å½•è´¦å·

2. **è·å–å…è´¹é¢åº¦**
   - æ–°ç”¨æˆ·é€šå¸¸æœ‰å…è´¹è¯•ç”¨é¢åº¦
   - æˆ–åœ¨æ§åˆ¶å°é¢†å–å…è´¹èµ„æºåŒ…

3. **åˆ›å»º API Key**
   - è¿›å…¥"æ§åˆ¶å°" â†’ "API Keys"
   - ç‚¹å‡»"æ–°å»ºAPI Key"
   - å¤åˆ¶ç”Ÿæˆçš„ Keyï¼ˆæ ¼å¼ï¼š`id.secret`ï¼‰

### æ­¥éª¤ 2: é…ç½®æ–°çš„ API Key

#### æ–¹æ³• A: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
python3 update_api_key.py
```

æŒ‰æç¤ºæ“ä½œï¼š
1. ç²˜è´´æ–°çš„ API Key
2. é€‰æ‹©ä¿å­˜æ–¹å¼ï¼ˆæ¨èä¿å­˜åˆ° `.env` æ–‡ä»¶ï¼‰

#### æ–¹æ³• B: æ‰‹åŠ¨åˆ›å»º .env æ–‡ä»¶

```bash
# åˆ›å»º backend/.env æ–‡ä»¶
cat > backend/.env << EOF
GLM_API_KEY=ä½ çš„æ–°API_Key
EOF
```

#### æ–¹æ³• C: ç›´æ¥ä¿®æ”¹ä»£ç 

ç¼–è¾‘ `backend/main.py` ç¬¬ 27 è¡Œï¼š

```python
GLM_API_KEY = os.getenv("GLM_API_KEY", "ä½ çš„æ–°API_Key")
```

### æ­¥éª¤ 3: é‡å¯æœåŠ¡

```bash
# åœæ­¢å½“å‰æœåŠ¡
kill $(lsof -ti:8000)  # åœæ­¢åç«¯
kill $(lsof -ti:3000)  # åœæ­¢å‰ç«¯

# é‡æ–°å¯åŠ¨
./start.sh
```

### æ­¥éª¤ 4: éªŒè¯

è®¿é—® http://localhost:8000/docs æµ‹è¯•ä»»æ„æ¥å£ï¼Œç¡®è®¤ä¸å†å‡ºç° 429 é”™è¯¯ã€‚

## ğŸ’° è´¹ç”¨è¯´æ˜

### æ™ºè°± AI GLM-4V å®šä»·ï¼ˆå‚è€ƒï¼‰

| æ¨¡å‹ | è¾“å…¥ä»·æ ¼ | è¾“å‡ºä»·æ ¼ |
|------|----------|----------|
| GLM-4V | Â¥0.10/åƒtokens | Â¥0.10/åƒtokens |
| GLM-4-Flash | Â¥0.10/åƒtokens | Â¥0.10/åƒtokens |

### å…è´¹é¢åº¦

- æ–°ç”¨æˆ·æ³¨å†Œé€šå¸¸èµ é€å…è´¹é¢åº¦
- å¯åœ¨æ§åˆ¶å°æŸ¥çœ‹ä½™é¢å’Œä½¿ç”¨æƒ…å†µ
- å»ºè®®è®¾ç½®è´¹ç”¨å‘Šè­¦

## ğŸ” æ£€æŸ¥ API ä½™é¢

è®¿é—®æ™ºè°±AIæ§åˆ¶å°æŸ¥çœ‹ï¼š
- API Key ä½™é¢
- ä½¿ç”¨é‡ç»Ÿè®¡
- è´¦å•æ˜ç»†

æ§åˆ¶å°: https://open.bigmodel.cn/console/overview

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: æ›´æ¢ API Key åä»ç„¶æŠ¥é”™

**è§£å†³**:
1. ç¡®è®¤æ–° API Key æ ¼å¼æ­£ç¡®ï¼ˆåŒ…å«ç‚¹å·ï¼‰
2. ç¡®è®¤æœåŠ¡å·²é‡å¯
3. æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦åœ¨ backend ç›®å½•ä¸‹
4. æŸ¥çœ‹åç«¯æ—¥å¿—: `tail -f backend.log`

### é—®é¢˜2: .env æ–‡ä»¶ä¸ç”Ÿæ•ˆ

**è§£å†³**:
```bash
# ç¡®è®¤ backend/main.py å·²åŠ è½½ dotenv
grep "from dotenv import load_dotenv" backend/main.py

# å¦‚æœæ²¡æœ‰ï¼Œé‡æ–°è¿è¡Œ update_api_key.py
# æˆ–æ‰‹åŠ¨æ·»åŠ å¯¼å…¥
```

### é—®é¢˜3: æƒ³è¦èŠ‚çœ API è´¹ç”¨

**å»ºè®®**:
1. å‡å°‘å›¾ç‰‡å¤§å°ï¼ˆå‹ç¼©åå†ä¸Šä¼ ï¼‰
2. é™åˆ¶ max_tokens å‚æ•°
3. ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆglm-4-flashï¼‰
4. å¯ç”¨ç¼“å­˜æœºåˆ¶

## ğŸ“ è·å–å¸®åŠ©

- æ™ºè°±AIæ–‡æ¡£: https://open.bigmodel.cn/dev/api
- æ™ºè°±AIç¤¾åŒº: https://open.bigmodel.cn/console/center
- é¡¹ç›® Issues: æäº¤åˆ°é¡¹ç›®ä»“åº“

## ğŸ” å®‰å…¨æé†’

- âœ… ä¸è¦å°† API Key æäº¤åˆ° Git
- âœ… ä½¿ç”¨ .env æ–‡ä»¶å­˜å‚¨ï¼ˆå·²æ·»åŠ åˆ° .gitignoreï¼‰
- âœ… å®šæœŸæ›´æ¢ API Key
- âŒ ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key

---

**æ›´æ–°æ—¶é—´**: 2026-02-01
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
